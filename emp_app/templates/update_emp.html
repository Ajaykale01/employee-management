<!DOCTYPE html>
<html>
<head>
    <title>Update Employee</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-4">

    <h2>Update Employee</h2>
    <hr>

    <!-- Step 1: Enter Employee First Name -->
    {% if not emp %}
    <form method="POST">
        {% csrf_token %}
        <label>Enter Employee First Name:</label>
        <input type="text" name="name" class="form-control" required>
        <br>
        <button type="submit" class="btn btn-primary">Load Employee</button>
    </form>
    {% endif %}

    <!-- Step 2: Show Employee Form -->
    {% if emp %}
    <form method="POST" class="mt-3">
        {% csrf_token %}
        <input type="hidden" name="emp_id" value="{{ emp.id }}">
        <input type="hidden" name="name" value="{{ emp.first_name }}">

        <label>First Name</label>
        <input type="text" name="first_name" class="form-control" value="{{ emp.first_name }}"><br>

        <label>Last Name</label>
        <input type="text" name="last_name" class="form-control" value="{{ emp.Last_name }}"><br>

        <label>Salary</label>
        <input type="number" name="salary" class="form-control" value="{{ emp.salary }}"><br>

        <label>Bonus</label>
        <input type="number" name="bonus" class="form-control" value="{{ emp.bonus }}"><br>

        <label>Phone</label>
        <input type="number" name="phone" class="form-control" value="{{ emp.phone }}"><br>

        <label>Department</label>
        <select name="department_id" class="form-control">
            {% for dept in departments %}
                <option value="{{ dept.id }}" {% if emp.dept.id == dept.id %}selected{% endif %}>
                    {{ dept.name }}
                </option>
            {% endfor %}
        </select><br>

        <label>Role</label>
        <select name="role_id" class="form-control">
            {% for role in roles %}
                <option value="{{ role.id }}" {% if emp.role.id == role.id %}selected{% endif %}>
                    {{ role.name }}
                </option>
            {% endfor %}
        </select><br>

        <button type="submit" class="btn btn-success">Update Employee</button>
    </form>
    {% endif %}

</body>
</html>
